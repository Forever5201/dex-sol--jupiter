# ===================================================================
# é—ªç”µè´· + Serveré…±ç›‘æ§ å®Œæ•´é…ç½®
# ===================================================================
# 
# é€‚åˆåœºæ™¯ï¼šæ— æœ¬é‡‘ç”¨æˆ·ï¼Œä½¿ç”¨ Solend é—ªç”µè´·è¿›è¡Œå¥—åˆ©
# æ‰€éœ€èµ„é‡‘ï¼šä»…éœ€ 0.1 SOL ä½œä¸ºäº¤æ˜“è´¹ï¼ˆçº¦ $20ï¼‰
# é¢„æœŸæ”¶ç›Šï¼š0.005 - 0.1 SOL/æ¬¡ï¼ˆå–å†³äºæœºä¼šå¤§å°ï¼‰
#
# ===================================================================

[bot]
name = "flashloan-arbitrage-bot"
network = "mainnet-beta"
dry_run = true  # âœ… æ¨¡æ‹Ÿè¿è¡Œæ¨¡å¼ï¼ˆä¸éœ€è¦ Jito æˆæƒï¼‰

# ===================================================================
# éªŒè¯é…ç½®
# ===================================================================
[validation]
enable_secondary = false  # å…³é—­äºŒæ¬¡éªŒè¯ï¼ŒåŠ é€Ÿæ„å»º

# ===================================================================
# ç½‘ç»œé…ç½®ï¼ˆå¦‚éœ€é€šè¿‡æœ¬åœ°ä»£ç†è®¿é—® Jupiterï¼‰
# ===================================================================
[network]
proxy_url = "http://127.0.0.1:7890"

# ===================================================================
# RPC é…ç½® - é—ªç”µè´·éœ€è¦é«˜æ€§èƒ½ RPC
# ===================================================================
[rpc]
# Heliuså…è´¹RPC - æ”¯æŒä¼˜å…ˆè´¹æŸ¥è¯¢ã€25 RPSé™åˆ¶ã€å›½å†…è®¿é—®è¾ƒå¿«
# æ³¨å†Œåœ°å€: https://helius.dev
helius_api_key = "d261c4a1-fffe-4263-b0ac-a667c05b5683"
urls = [
  "https://mainnet.helius-rpc.com/?api-key=d261c4a1-fffe-4263-b0ac-a667c05b5683",
  "https://api.mainnet-beta.solana.com",  # å¤‡ç”¨ï¼ˆä¸æ”¯æŒä¼˜å…ˆè´¹æŸ¥è¯¢ï¼‰
]
commitment = "processed"
timeout = 30000  # 30ç§’

# ===================================================================
# é’±åŒ…é…ç½® - ä½¿ç”¨æ‚¨å·²é…ç½®çš„é—ªç”µè´·é’±åŒ…
# ===================================================================
[keypair]
path = "./keypairs/flashloan-wallet.json"  # æ‚¨çš„é’±åŒ…å·²é…ç½®
min_balance_sol = 0.1  # åªéœ€è¦ 0.1 SOL æ”¯ä»˜äº¤æ˜“è´¹

# ===================================================================
# ç»æµæ¨¡å‹é…ç½®
# ===================================================================
[economics]
capital_size = "medium"

[economics.cost]
signature_count = 4  # é—ªç”µè´·éœ€è¦é¢å¤–ç­¾å
compute_units = 800_000  # å¤æ‚äº¤æ˜“éœ€è¦æ›´å¤šè®¡ç®—å•å…ƒ
compute_unit_price = 35_000  # ä»20_000æå‡åˆ°35_000ï¼ˆé…åˆåŠ¨æ€æœ€ä½ä¿éšœï¼‰
use_flash_loan = true
flash_loan_amount = 50_000_000_000  # é»˜è®¤å€Ÿæ¬¾ 50 SOLï¼ˆåŒ¹é…WorkeræŸ¥è¯¢ï¼‰

[economics.profit]
# åˆ©æ¶¦å¿…é¡»è¦†ç›–æ‰€æœ‰è´¹ç”¨
min_profit_lamports = 5_000_000  # 0.005 SOL æœ€ä½åˆ©æ¶¦
min_roi = 200  # 200% ROIï¼ˆåŸºäºè´¹ç”¨ï¼Œä¸æ˜¯æœ¬é‡‘ï¼‰
max_slippage = 0.015  # 1.5% æœ€å¤§æ»‘ç‚¹
min_liquidity_usd = 100000  # åªé€‰æ‹©å¤§æ± å­ï¼ˆ$100k+æµåŠ¨æ€§ï¼‰

[economics.risk]
# é£é™©æ§åˆ¶ - é—ªç”µè´·å¤±è´¥æˆæœ¬é«˜ï¼Œéœ€è¦æ›´ä¿å®ˆ
max_consecutive_failures = 3  # è¿ç»­å¤±è´¥ 3 æ¬¡æš‚åœ
max_hourly_loss_lamports = 1_000_000  # æ¯å°æ—¶æœ€å¤šäºæŸ 0.001 SOL
min_success_rate = 0.6  # æˆåŠŸç‡ä½äº 60% æš‚åœ
cooldown_period = 600_000  # è§¦å‘ç†”æ–­åå†·å´ 10 åˆ†é’Ÿ

[economics.jito]
# Jito å°è´¹é…ç½® - ä¼˜åŒ–åå¹³è¡¡ç­–ç•¥
min_tip_lamports = 100_000  # 0.0001 SOL
max_tip_lamports = 100_000_000  # 0.1 SOL
profit_share_percentage = 10  # ä»30%é™è‡³10%ï¼ŒèŠ‚çœ20%æ¯›åˆ©æ¶¦
competition_multiplier = 2.0
urgency_multiplier = 1.5

# ===================================================================
# é—ªç”µè´·é…ç½® - Jupiter Lend åè®®ï¼ˆ0% è´¹ç”¨ï¼ï¼‰
# ===================================================================
[flashloan]
provider = "jupiter-lend"  # âœ… å®˜æ–¹ç¡®è®¤ï¼šJupiter Lend 0%è´¹ç”¨é—ªç”µè´·ï¼

# Jupiter Lend é…ç½®ï¼ˆ0% è´¹ç”¨ï¼ï¼‰
[flashloan.jupiter_lend]
min_borrow_amount = 50_000_000_000  # æœ€å°å€Ÿæ¬¾ 50 SOLï¼ˆåŒ¹é…WorkeræŸ¥è¯¢é‡‘é¢ï¼‰
max_borrow_amount = 50_000_000_000  # æœ€å¤§å€Ÿæ¬¾ 50 SOLï¼ˆå›ºå®šé‡‘é¢ï¼‰
fee_rate = 0.0  # 0% è´¹ç”¨ï¼

# Solend é…ç½®ï¼ˆå¤‡ç”¨ï¼‰
[flashloan.solend]
lending_market = "4UpD2fh7xH3VP9QQaXtsS1YY3bxzWhtfpks7FatyKvdY"
reserve_sol = "8PbodeaosQP19SjYFx855UMqWxH2HynZLdBXmsrbac36"
min_borrow_amount = 10_000_000_000  # æœ€å°å€Ÿæ¬¾ 10 SOL
max_borrow_amount = 1_000_000_000_000  # æœ€å¤§å€Ÿæ¬¾ 1000 SOL
fee_rate = 0.0009  # 0.09% è´¹ç‡

[flashloan.dynamic_sizing]
enabled = false  # å…³é—­åŠ¨æ€å€Ÿæ¬¾ï¼Œä½¿ç”¨å›ºå®šçš„50 SOL
min_multiplier = 10  # å€Ÿæ¬¾è‡³å°‘æ˜¯é¢„æœŸåˆ©æ¶¦çš„ 10 å€
max_multiplier = 100
safety_margin = 1.5  # å®‰å…¨è¾¹é™…

# ===================================================================
# Jupiter API é…ç½®ï¼ˆUltra APIï¼‰
# ===================================================================
[jupiter_api]
# ğŸ”‘ Ultra API å¯†é’¥ï¼ˆå¿…å¡«ï¼ï¼‰
api_key = "3cf45ad3-12bc-4832-9307-d0b76357e005"
# éªŒè¯ API å¯†é’¥ï¼ˆå¯é€‰ï¼Œç”¨äºäºŒæ¬¡éªŒè¯ï¼‰
validation_api_key = "3cf45ad3-12bc-4832-9307-d0b76357e005"
# Ultra API ç«¯ç‚¹
endpoint = "https://api.jup.ag/ultra"

# ===================================================================
# Jupiter Server é…ç½®ï¼ˆæœ¬åœ° APIï¼Œå¯é€‰ï¼‰
# ===================================================================
[jupiter_server]
rpc_url = "https://api.mainnet-beta.solana.com"
port = 8080
enable_circular_arbitrage = true
max_routes = 3
only_direct_routes = false

# ===================================================================
# æœºä¼šå‘ç°å™¨é…ç½®
# ===================================================================
[opportunity_finder]
mints_file = "./mints-sol-only.txt"  # ğŸ”¥ åªä½¿ç”¨SOLè¿›è¡Œå¥—åˆ©
dedicated_worker_mode = false  # ğŸ”¥ ç¦ç”¨ä¸“ç”¨æ¨¡å¼ï¼Œå…è®¸1ä¸ªWorkerå¤„ç†æ‰€æœ‰Token
worker_count = 1  # ğŸ”¥ Legacy API Liteé™é€Ÿï¼š1 RPSï¼Œä½¿ç”¨1ä¸ªWorker
query_interval_ms = 2000  # ğŸ”¥ 2ç§’é—´éš” = 0.5 RPS (1 Worker Ã— 2 requests / 2s = 1 RPSï¼Œç¬¦åˆLiteé™é€Ÿ)
min_profit_lamports = 5_000_000  # å¿…é¡»è¦†ç›–é—ªç”µè´·è´¹ç”¨
slippage_bps = 100  # 1% æ»‘ç‚¹ï¼ˆå¢åŠ ä»¥å…è®¸æ›´ç®€å•è·¯ç”±ï¼‰
max_bridge_tokens = 1  # é™åˆ¶ä¸º1ï¼Œå‡å°‘äº¤æ˜“å¤æ‚åº¦
max_hops = 3  # âš ï¸ å…³é”®ï¼šæœ€å¤š3è·³ï¼Œé¿å…äº¤æ˜“è¿‡å¤§
max_accounts = 20  # é™åˆ¶è´¦æˆ·æ•°é‡ï¼ˆä»é»˜è®¤32é™ä½ï¼‰
excluded_dexes = ["Aldrin V2", "SolFi V2"]  # æ’é™¤å¤æ‚DEX

[opportunity_finder.flashloan_filter]
# é—ªç”µè´·ç‰¹æ®Šè¿‡æ»¤ - åªæ‰¾å¤§æœºä¼š
min_gross_profit_multiplier = 3  # æ¯›åˆ©æ¶¦å¿…é¡»æ˜¯è´¹ç”¨çš„ 3 å€
required_liquidity_multiplier = 2  # æµåŠ¨æ€§å¿…é¡»æ˜¯å€Ÿæ¬¾çš„ 2 å€

# ===================================================================
# æ‰§è¡Œå™¨é…ç½®
# ===================================================================
[execution]
max_concurrent_trades = 1  # ä¸å¹¶å‘æ‰§è¡Œ

# Jito Bundleé…ç½®ï¼ˆè‡ªåŠ¨æ‹†åˆ†å¤§äº¤æ˜“ï¼‰
auto_bundle_threshold = 1630  # âœ… ä¼˜åŒ–ï¼šæé«˜åˆ°1630ï¼ˆATAä¼˜åŒ–åï¼Œæœ€å¤§äº¤æ˜“1595Bï¼Œå®‰å…¨ä½™é‡49Bï¼‰
enable_bundle_mode = true     # å¯ç”¨Bundleæ”¯æŒï¼ˆçªç ´1232å­—èŠ‚é™åˆ¶ï¼‰
# è¯´æ˜ï¼šåˆ›å»ºUSDC+USDT ATAåï¼Œäº¤æ˜“å¤§å°é™è‡³1492-1600B
# å®‰å…¨è®¡ç®—ï¼š1595Bï¼ˆæœ€å¤§è§‚å¯Ÿå€¼ï¼‰+ 35Bï¼ˆä½™é‡ï¼‰= 1630B < 1644Bï¼ˆé™åˆ¶ï¼‰âœ…

[jito]
# âš ï¸ Jito æœªæˆæƒï¼Œä½†ä¿ç•™é…ç½®ä»¥é˜²æ­¢ç¨‹åºå´©æºƒ
# å®é™…æ‰§è¡Œæ—¶ä¼šä½¿ç”¨ dry_run æ¨¡å¼æˆ– RPC fallback
block_engine_url = "mainnet.block-engine.jito.wtf"
auth_keypair_path = "./keypairs/flashloan-wallet.json"
check_jito_leader = false  # âŒ ç¦ç”¨ Leader æ£€æŸ¥ï¼ˆæœªæˆæƒï¼‰
min_tip_lamports = 100_000
max_tip_lamports = 100_000_000
tip_strategy = "balanced"
confirmation_timeout = 45000  # 45ç§’ï¼ˆé—ªç”µè´·äº¤æ˜“æ›´å¤æ‚ï¼‰

# ğŸ’¡ è¯´æ˜ï¼š
# - å½“å‰é’±åŒ…æœªè¢« Jito æˆæƒï¼Œäº¤æ˜“ä¼šå¤±è´¥
# - å»ºè®®å…ˆç”¨ dry_run = true æ¨¡æ‹Ÿè¿è¡Œ
# - æˆ–ç”³è¯· Jito æˆæƒï¼š
#   1. è®¿é—® https://www.jito.wtf/ æ³¨å†Œ
#   2. å°†é’±åŒ…æ·»åŠ åˆ°ç™½åå•: 8mMVqLDsCsHYFZWvfEs7GhW9w7RH6J4rRxamLRgpwDDc
#   3. ç­‰å¾…å®¡æ ¸ï¼ˆ1-3ä¸ªå·¥ä½œæ—¥ï¼‰
#   4. å°† check_jito_leader æ”¹ä¸º true

# ===================================================================
# æ•°æ®åº“é…ç½®ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
# ===================================================================
[database]
enabled = false  # é»˜è®¤ç¦ç”¨ï¼Œå®‰è£… PostgreSQL åæ”¹ä¸º true
# DATABASE_URL ä»ç¯å¢ƒå˜é‡è¯»å–ï¼ˆ.env æ–‡ä»¶ï¼‰
# æˆ–åœ¨è¿™é‡ŒæŒ‡å®š: url = "postgresql://arbitrage_user:arbitrage_password@localhost:5432/arbitrage_db"
#
# å¯ç”¨æ•°æ®åº“è®°å½•çš„å¥½å¤„:
# - è®°å½•æ‰€æœ‰å‘ç°çš„å¥—åˆ©æœºä¼šï¼ˆè¶…è¿‡é˜ˆå€¼çš„ï¼‰
# - åˆ†æå†å²æ•°æ®ï¼Œä¼˜åŒ–ç­–ç•¥
# - è·Ÿè¸ªåˆ©æ¶¦è¶‹åŠ¿
#
# å¿«é€Ÿé…ç½®:
# 1. å®‰è£… PostgreSQL (è§ DATABASE_SETUP_WINDOWS.md)
# 2. è¿è¡Œ setup-database.bat
# 3. å°†ä¸Šé¢çš„ enabled æ”¹ä¸º true
# 4. é‡å¯æœºå™¨äºº

# ===================================================================
# Serveré…±ç›‘æ§é…ç½® - å¾®ä¿¡é€šçŸ¥
# ===================================================================
[monitoring]
enabled = true

[monitoring.serverchan]
send_key = "SCT299918Tjm2hNLuwKRB9DqqHaiDvj3kJ"  # æ‚¨çš„ SendKey
enabled = true

# é€šçŸ¥è®¾ç½®
alert_on_profit = true  # èµšé’±æ—¶é€šçŸ¥
alert_on_error = true  # å‡ºé”™æ—¶é€šçŸ¥
alert_on_warning = true  # è­¦å‘Šæ—¶é€šçŸ¥
min_profit_for_alert = 5_000_000  # åˆ©æ¶¦è¶…è¿‡ 0.005 SOL æ‰é€šçŸ¥

# æœºä¼šå‘ç°é€šçŸ¥ï¼ˆå¼€å‘é˜¶æ®µï¼‰
alert_on_opportunity_found = true  # å‘ç°æœºä¼šæ—¶é€šçŸ¥
min_opportunity_profit_for_alert = 1_000_000  # æœ€å°åˆ©æ¶¦é˜ˆå€¼ 0.001 SOL
opportunity_alert_rate_limit_ms = 0  # 0 = ä¸é™åˆ¶é¢‘ç‡

# é™æµè®¾ç½®ï¼ˆé¿å…åˆ·å±ï¼‰
rate_limit_ms = 5000  # 5ç§’å†…æœ€å¤šä¸€æ¡
batch_interval_ms = 1000
max_batch_size = 5

# é—ªç”µè´·ç‰¹æ®Šé€šçŸ¥
[monitoring.flashloan_alerts]
alert_on_borrow = true  # å€Ÿæ¬¾æ—¶é€šçŸ¥
alert_on_repay = true  # è¿˜æ¬¾æ—¶é€šçŸ¥
alert_on_fee = true  # è´¹ç”¨é€šçŸ¥

# ===================================================================
# æ—¥å¿—é…ç½®
# ===================================================================
[logging]
level = "info"  # info/debug/warn/error
pretty_print = true
file_output = true
log_dir = "./logs"
log_file_name = "flashloan.log"
console_output = true

[logging.flashloan]
log_borrow_details = true
log_swap_steps = true
log_repay_details = true

# ===================================================================
# å®‰å…¨é…ç½®
# ===================================================================
[security]
max_daily_trades = 50  # æ¯å¤©æœ€å¤š 50 ç¬”
max_daily_loss_sol = 0.5  # æ¯å¤©æœ€å¤šäº 0.5 SOL
max_single_trade_fee_sol = 0.1  # å•ç¬”æœ€å¤š 0.1 SOL è´¹ç”¨

[security.flashloan_checks]
verify_repay_amount = true  # éªŒè¯è¿˜æ¬¾é‡‘é¢
verify_profit_after_fees = true  # éªŒè¯æ‰£è´¹åæœ‰åˆ©æ¶¦
simulate_before_execute = true  # æ‰§è¡Œå‰æ¨¡æ‹Ÿ
emergency_stop_on_failed_repay = true  # è¿˜æ¬¾å¤±è´¥ç«‹å³åœæ­¢

# ===================================================================
# äº¤æ˜“æ„å»ºé…ç½®
# ===================================================================
[transaction_builder]
use_versioned_transaction = true
use_lut = true  # å¿…é¡»ä½¿ç”¨ LUT å‡å°‘äº¤æ˜“å¤§å°

[transaction_builder.lut]
preload_common_accounts = true
include_dex_accounts = true
include_lending_accounts = true

# ===================================================================
# äº¤æ˜“å¤§å°ä¼˜åŒ–é…ç½®
# ===================================================================
[transaction_optimization]
# è·¯ç”±å¤æ‚åº¦ç­–ç•¥ï¼ˆé™çº§å±‚çº§ï¼‰
# ç¬¬1å±‚ï¼šæœ€ä¼˜è·¯ç”±ï¼Œä½¿ç”¨æœ€å¤šè´¦æˆ·
# ç¬¬2å±‚ï¼šä¸­ç­‰é™åˆ¶
# ç¬¬3å±‚ï¼šä¸¥æ ¼é™åˆ¶ï¼Œä»…ä½¿ç”¨ç›´æ¥è·¯ç”±
max_accounts_tier_1 = 24  # ä»28é™ä½
max_accounts_tier_2 = 20  # ä»24é™ä½
max_accounts_tier_3 = 16  # ä»20é™ä½

# è·³è¿‡cleanupæŒ‡ä»¤ä»¥å‡å°äº¤æ˜“å¤§å°
# âš ï¸ è­¦å‘Šï¼šè·³è¿‡cleanupä¼šå¯¼è‡´æ¯ç¬”çº¦0.002 SOLçš„ç§Ÿé‡‘æŸå¤±ï¼ˆæœªå…³é—­çš„ä¸´æ—¶è´¦æˆ·ï¼‰
# å®é™…æˆæœ¬ï¼šå¦‚æœæ¯å¤©20ç¬” = 0.04 SOL/å¤© = 1.2 SOL/æœˆï¼Œä¸å»ºè®®è·³è¿‡
skip_cleanup_instructions = false  # âœ… ä¿ç•™cleanupï¼Œé¿å…ç§Ÿé‡‘æŸå¤±

# ===================================================================
# é¢„æœŸè¡¨ç°
# ===================================================================
# 
# åŸºäºé—ªç”µè´·ç­–ç•¥çš„é¢„æœŸè¡¨ç°ï¼š
# - æœºä¼šå‘ç°ç‡ï¼š5-15 ä¸ª/å°æ—¶
# - æ‰§è¡ŒæˆåŠŸç‡ï¼š60-70%
# - å•æ¬¡å¹³å‡åˆ©æ¶¦ï¼š0.005 - 0.05 SOL
# - é¢„æœŸæ—¥æ”¶ç›Šï¼š0.05 - 0.5 SOL
# - é£é™©è¯„çº§ï¼šä¸­ç­‰ï¼ˆæ— æœ¬é‡‘é£é™©ï¼Œæœ‰æ‰‹ç»­è´¹é£é™©ï¼‰
#
# ===================================================================
# é‡è¦æç¤º
# ===================================================================
#
# 1. æˆæœ¬ç»“æ„ï¼š
#    - é—ªç”µè´·è´¹ç”¨ï¼šå€Ÿæ¬¾é‡‘é¢ Ã— 0.09%
#    - ä¾‹ï¼šå€Ÿ 100 SOL = 0.09 SOL è´¹ç”¨
#    - å¿…é¡»ç¡®ä¿ï¼šåˆ©æ¶¦ > é—ªç”µè´·è´¹ç”¨ + äº¤æ˜“è´¹ + Jito tip
#
# 2. å¤±è´¥é£é™©ï¼š
#    - é—ªç”µè´·å¤±è´¥ä¸ä¼šäºæŸæœ¬é‡‘
#    - åªä¼šäºæŸäº¤æ˜“è´¹ï¼ˆçº¦ 0.0001-0.001 SOL/æ¬¡ï¼‰
#    - ä½†é¢‘ç¹å¤±è´¥ä¼šç´¯ç§¯æŸå¤±
#
# 3. å¯åŠ¨å‰æ£€æŸ¥ï¼š
#    âœ… é’±åŒ…é‡Œè‡³å°‘æœ‰ 0.1 SOLï¼ˆæ”¯ä»˜äº¤æ˜“è´¹ï¼‰
#    âœ… RPC ç«¯ç‚¹å¯ç”¨ï¼ˆå»ºè®®ä½¿ç”¨ä»˜è´¹ RPCï¼‰
#    âœ… Serveré…±å·²æµ‹è¯•æˆåŠŸ
#    âœ… å…ˆç”¨ dry_run = true æ¨¡æ‹Ÿè¿è¡Œ
#
# 4. è°ƒè¯•å»ºè®®ï¼š
#    - ä» dry_run = true å¼€å§‹
#    - è§‚å¯Ÿæ—¥å¿—ï¼Œç¡®è®¤æœºä¼šå‘ç°æ­£å¸¸
#    - è®¾ç½®ä¸º false åä»å°é¢å¼€å§‹ï¼ˆ10-50 SOLï¼‰
#    - é€æ­¥å¢åŠ åˆ° 100-500 SOL
#
# 5. ç›‘æ§æ‚¨çš„å¾®ä¿¡"æœåŠ¡é€šçŸ¥"ï¼š
#    - ğŸ’° åˆ©æ¶¦é€šçŸ¥ - æ¯æ¬¡å¥—åˆ©æˆåŠŸ
#    - âŒ é”™è¯¯å‘Šè­¦ - å‡ºç°å¼‚å¸¸
#    - ğŸš¨ ç†”æ–­é€šçŸ¥ - è§¦å‘é£é™©ä¿æŠ¤
#    - ğŸ“Š å®šæœŸç»Ÿè®¡ - æ€§èƒ½æŠ¥å‘Š
#
# ===================================================================

